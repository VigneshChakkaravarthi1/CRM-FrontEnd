{"ast":null,"code":"import axios from \"axios\";\nconst rootUrl = \"http://localhost:3001/\";\nconst loginUrl = rootUrl + \"v1/user/login\";\nconst userProfileUrl = rootUrl + \"v1/user\";\nexport const userLogin = formData => {\n  return new Promise(async (resolve, reject) => {\n    try {\n      const result = await axios.post(loginUrl, formData);\n\n      if (result.data.status == \"success\") {\n        sessionStorage.setItem('accessJWT', result.data.accessJWT);\n        localStorage.setItem(\"crmSite\", JSON.stringify({\n          refreshJWT: result.data.refreshJWT\n        }));\n      }\n\n      resolve(result.data);\n    } catch (error) {\n      console.log(error);\n      reject(error);\n    }\n  });\n};\nexport const fetchUser = () => {\n  return new Promise(async (resolve, reject) => {\n    try {\n      let accessJWT = sessionStorage.getItem(\"accessJWT\");\n\n      if (!accessJWT) {\n        reject(\"Token not found\");\n      }\n\n      const result = await axios.get(userProfileUrl, {\n        headers: {\n          Authorization: accessJWT\n        }\n      });\n      resolve(result.data);\n    } catch (error) {\n      console.log(error);\n      reject(error);\n    }\n  });\n};\nexport const userLogout = () => {};","map":{"version":3,"names":["axios","rootUrl","loginUrl","userProfileUrl","userLogin","formData","Promise","resolve","reject","result","post","data","status","sessionStorage","setItem","accessJWT","localStorage","JSON","stringify","refreshJWT","error","console","log","fetchUser","getItem","get","headers","Authorization","userLogout"],"sources":["C:/Users/cvignesh/Desktop/CRM Front End/src/api/userApi.js"],"sourcesContent":["\r\nimport axios from \"axios\"\r\nconst rootUrl = \"http://localhost:3001/\"\r\nconst loginUrl= rootUrl+\"v1/user/login\"\r\nconst userProfileUrl= rootUrl+\"v1/user\"\r\nexport const userLogin = formData=>{\r\n    return new Promise(async(resolve,reject)=>{\r\n        try{\r\nconst result = await axios.post(loginUrl,formData)\r\n\r\nif(result.data.status==\"success\")\r\n{\r\n    \r\n    sessionStorage.setItem('accessJWT',result.data.accessJWT)\r\n    localStorage.setItem(\"crmSite\",JSON.stringify({refreshJWT:result.data.refreshJWT}))\r\n}\r\nresolve(result.data)\r\n        }\r\n        catch(error)\r\n        {\r\n            console.log(error)\r\n            reject(error)\r\n        }\r\n    })\r\n}\r\n\r\nexport const fetchUser = ()=>{\r\n    return new Promise(async(resolve,reject)=>{\r\n        try{\r\nlet accessJWT= sessionStorage.getItem(\"accessJWT\")\r\nif(!accessJWT){reject(\"Token not found\")}\r\nconst result = await axios.get(userProfileUrl,{\r\n    headers:{\r\n        Authorization:accessJWT\r\n    }\r\n})\r\n\r\n\r\nresolve(result.data)\r\n        }\r\n        catch(error)\r\n        {\r\n            console.log(error)\r\n            reject(error)\r\n        }\r\n    })\r\n}\r\n\r\nexport const userLogout=()=>{\r\n\r\n}"],"mappings":"AACA,OAAOA,KAAP,MAAkB,OAAlB;AACA,MAAMC,OAAO,GAAG,wBAAhB;AACA,MAAMC,QAAQ,GAAED,OAAO,GAAC,eAAxB;AACA,MAAME,cAAc,GAAEF,OAAO,GAAC,SAA9B;AACA,OAAO,MAAMG,SAAS,GAAGC,QAAQ,IAAE;EAC/B,OAAO,IAAIC,OAAJ,CAAY,OAAMC,OAAN,EAAcC,MAAd,KAAuB;IACtC,IAAG;MACX,MAAMC,MAAM,GAAG,MAAMT,KAAK,CAACU,IAAN,CAAWR,QAAX,EAAoBG,QAApB,CAArB;;MAEA,IAAGI,MAAM,CAACE,IAAP,CAAYC,MAAZ,IAAoB,SAAvB,EACA;QAEIC,cAAc,CAACC,OAAf,CAAuB,WAAvB,EAAmCL,MAAM,CAACE,IAAP,CAAYI,SAA/C;QACAC,YAAY,CAACF,OAAb,CAAqB,SAArB,EAA+BG,IAAI,CAACC,SAAL,CAAe;UAACC,UAAU,EAACV,MAAM,CAACE,IAAP,CAAYQ;QAAxB,CAAf,CAA/B;MACH;;MACDZ,OAAO,CAACE,MAAM,CAACE,IAAR,CAAP;IACS,CAVD,CAWA,OAAMS,KAAN,EACA;MACIC,OAAO,CAACC,GAAR,CAAYF,KAAZ;MACAZ,MAAM,CAACY,KAAD,CAAN;IACH;EACJ,CAjBM,CAAP;AAkBH,CAnBM;AAqBP,OAAO,MAAMG,SAAS,GAAG,MAAI;EACzB,OAAO,IAAIjB,OAAJ,CAAY,OAAMC,OAAN,EAAcC,MAAd,KAAuB;IACtC,IAAG;MACX,IAAIO,SAAS,GAAEF,cAAc,CAACW,OAAf,CAAuB,WAAvB,CAAf;;MACA,IAAG,CAACT,SAAJ,EAAc;QAACP,MAAM,CAAC,iBAAD,CAAN;MAA0B;;MACzC,MAAMC,MAAM,GAAG,MAAMT,KAAK,CAACyB,GAAN,CAAUtB,cAAV,EAAyB;QAC1CuB,OAAO,EAAC;UACJC,aAAa,EAACZ;QADV;MADkC,CAAzB,CAArB;MAOAR,OAAO,CAACE,MAAM,CAACE,IAAR,CAAP;IACS,CAXD,CAYA,OAAMS,KAAN,EACA;MACIC,OAAO,CAACC,GAAR,CAAYF,KAAZ;MACAZ,MAAM,CAACY,KAAD,CAAN;IACH;EACJ,CAlBM,CAAP;AAmBH,CApBM;AAsBP,OAAO,MAAMQ,UAAU,GAAC,MAAI,CAE3B,CAFM"},"metadata":{},"sourceType":"module"}